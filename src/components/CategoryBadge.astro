---
export interface Props {
	category: string;
	color?: string;
	size?: "sm" | "md" | "lg";
	variant?: "solid" | "outline" | "soft";
	class?: string;
	id?: string;
}

const {
	category,
	color = "var(--color-primary)",
	size = "md",
	variant = "solid",
	class: className = "",
	id,
} = Astro.props;

// Generate CSS custom properties for dynamic colors
const colorStyles = color.startsWith("var(")
	? `--badge-color: ${color};`
	: `--badge-color: ${color};`;
---

<span
	class={`category-badge category-badge--${size} category-badge--${variant} ${className}`}
	style={colorStyles}
	id={id}
>
	{category}
</span>

<style>
	.category-badge {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		font-weight: 600;
		border-radius: var(--border-radius);
		transition: all 0.2s ease;
		white-space: nowrap;
		border: var(--border-width) solid transparent;
	}

	/* Size variants */
	.category-badge--sm {
		padding: 0.25rem 0.5rem;
		font-size: 0.75rem;
	}

	.category-badge--md {
		padding: 0.5rem 1rem;
		font-size: 0.875rem;
	}

	.category-badge--lg {
		padding: 0.75rem 1.5rem;
		font-size: 1rem;
	}

	/* Variant styles */
	.category-badge--solid {
		background: var(--badge-color);
		color: white;
		border-color: var(--badge-color);
	}

	.category-badge--outline {
		background: transparent;
		color: var(--badge-color);
		border-color: var(--badge-color);
	}

	.category-badge--soft {
		background: color-mix(in srgb, var(--badge-color) 15%, transparent);
		color: var(--badge-color);
		border-color: color-mix(in srgb, var(--badge-color) 25%, transparent);
	}

	/* Hover effects */
	.category-badge--solid:hover {
		background: color-mix(in srgb, var(--badge-color) 85%, black);
		border-color: color-mix(in srgb, var(--badge-color) 85%, black);
	}

	.category-badge--outline:hover {
		background: color-mix(in srgb, var(--badge-color) 10%, transparent);
	}

	.category-badge--soft:hover {
		background: color-mix(in srgb, var(--badge-color) 25%, transparent);
		border-color: color-mix(in srgb, var(--badge-color) 35%, transparent);
	}

	/* Common BMI category colors for convenience */
	.category-badge.underweight {
		--badge-color: #3366ff;
	}

	.category-badge.normal {
		--badge-color: var(--color-success);
	}

	.category-badge.overweight {
		--badge-color: var(--color-warning);
	}

	.category-badge.obese {
		--badge-color: var(--color-danger);
	}

	/* Responsive design */
	@media (max-width: 768px) {
		.category-badge--lg {
			padding: 0.5rem 1rem;
			font-size: 0.875rem;
		}

		.category-badge--md {
			padding: 0.375rem 0.75rem;
			font-size: 0.8125rem;
		}
	}
</style>
